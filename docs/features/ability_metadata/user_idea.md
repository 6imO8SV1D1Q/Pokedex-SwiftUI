# 特性分類案（ユーザー）

**作成日:** 2025-10-15
**目的:** 対戦用特性メタデータフィルターの分類を検討

---

# 特性分類のアイデア

## 背景
scarlet_violet.jsonに269個のポケモン特性データがあります。各特性には以下の
情報があります：
- id, name, nameJa（日本語名）
- effect（英語の効果説明テキスト）

現在、effectは自然言語のテキストのみで、プログラムから効果を判定・利用する
のが困難です。
そこで、特性の効果を**構造化されたメタデータ**として追加したいです。

## 要件

### 必須要件
- **269個全ての特性をカバーできるカテゴリー・構造設計**
- 倍率や確率などの数値データを保持
- 条件付き効果を表現できる（HP閾値、被弾後、天候、フィールド、威力閾値等）
- 複合効果を持つ特性に対応
- 対戦向けの情報を網羅
- 特性の発動条件・無効化条件を明確に表現

### 技術的制約
- Swift言語で実装
- Codableプロトコルでデコード可能
- Optional地獄を避けつつ、型安全性を保つ
- ネストが深すぎない、Swiftで扱いやすい構造

## 特性の効果パターン例

### 基本パターン

#### 1. シンプルな能力値倍率
- **huge-power（ちからもち）**: 攻撃が2倍
- **pure-power（ヨガパワー）**: 攻撃が2倍

#### 2. 特定タイプ技の威力上昇
- **transistor（トランジスタ）**: 電気技の威力1.5倍
- **dragons-maw（りゅうのあぎと）**: ドラゴン技の威力1.5倍
- **steely-spirit（はがねのせいしん）**: 鋼技の威力1.5倍

#### 3. HP依存の威力上昇（御三家特性）
- **blaze（もうか）**: HP1/3以下で炎技1.5倍
- **torrent（げきりゅう）**: HP1/3以下で水技1.5倍
- **overgrow（しんりょく）**: HP1/3以下で草技1.5倍
- **swarm（むしのしらせ）**: HP1/3以下で虫技1.5倍

#### 4. タイプ無効化のみ
- **levitate（ふゆう）**: 地面技無効
- **soundproof（ぼうおん）**: 音技無効

#### 5. タイプ吸収（無効化 + HP回復）
- **volt-absorb（ちくでん）**: 電気技でHP1/4回復
- **water-absorb（ちょすい）**: 水技でHP1/4回復
- **earth-eater（どしょく）**: 地面技でHP1/4回復

#### 6. タイプ無効化 + 能力上昇
- **sap-sipper（そうしょく）**: 草技無効 + 攻撃+1
- **motor-drive（でんきエンジン）**: 電気技無効 + 素早さ+1

#### 7. タイプ無効化 + 引き寄せ + 能力上昇
- **lightning-rod（ひらいしん）**: 電気技引き寄せ + 無効化 + 特攻+1
- **storm-drain（よびみず）**: 水技引き寄せ + 無効化 + 特攻+1

#### 8. タイプ無効化 + 条件付き威力上昇
- **flash-fire（もらいび）**: 炎技無効 + 炎技を受けた後、自分の炎技1.5倍

#### 9. タイプ耐性
- **thick-fat（あついしぼう）**: 炎・氷技のダメージ半減
- **fluffy（もふもふ）**: 接触技のダメージ半減、炎技のダメージ2倍

#### 10. 複合効果
- **water-bubble（すいほう）**: 炎技で受けるダメージ半減 + 水技威力2倍 + やけど無効

### 状態異常関連

#### 11. 状態異常無効
- **limber（じゅうなん）**: まひ無効
- **insomnia（ふみん）**: ねむり無効
- **immunity（めんえき）**: どく無効
- **water-veil（みずのベール）**: やけど無効
- **magma-armor（マグマのよろい）**: こおり無効
- **own-tempo（マイペース）**: こんらん無効
- **oblivious（どんかん）**: メロメロ・ちょうはつ無効
- **inner-focus（せいしんりょく）**: ひるみ無効
- **vital-spirit（やるき）**: ねむり無効

#### 12. 接触で状態異常付与
- **static（せいでんき）**: 接触時30%でまひ
- **flame-body（ほのおのからだ）**: 接触時30%でやけど
- **poison-point（どくのトゲ）**: 接触時30%でどく
- **effect-spore（ほうし）**: 接触時各10%でどく・まひ・ねむりのいずれか

#### 13. 状態異常反射
- **synchronize（シンクロ）**: どく・まひ・やけどを相手にも与える

#### 14. 状態異常回復
- **natural-cure（しぜんかいふく）**: 交代時に状態異常回復
- **shed-skin（だっぴ）**: 毎ターン終了時33%で状態異常回復
- **hydration（うるおいボディ）**: 雨の時、ターン終了時に状態異常回復
- **healer（いやしのこころ）**: ターン終了時に味方の状態異常を30%で回復

### 能力値・ランク補正関連

#### 15. 能力ランク変化（場に出た時）
- **intimidate（いかく）**: 場に出た時、相手の攻撃-1
- **download（ダウンロード）**: 場に出た時、相手の防御と特防を比較し低い方に対応する攻撃or特攻+1
- **intrepid-sword（ふとうのけん）**: 場に出た時、攻撃+1
- **dauntless-shield（ふくつのたて）**: 場に出た時、防御+1

#### 16. 能力ランク変化（毎ターン）
- **speed-boost（かそく）**: 毎ターン終了時、素早さ+1
- **moody（ムラっけ）**: 毎ターン終了時、ランダムな能力+2、別のランダムな能力-1

#### 17. 能力ランク低下無効
- **clear-body（クリアボディ）**: 相手からの能力低下無効
- **white-smoke（しろいけむり）**: 相手からの能力低下無効
- **full-metal-body（メタルプロテクト）**: 相手からの能力低下無効
- **hyper-cutter（かいりきバサミ）**: 攻撃低下無効
- **keen-eye（するどいめ）**: 命中率低下無効
- **big-pecks（はとむね）**: 防御低下無効

#### 18. 能力ランク補正の特殊処理
- **simple（たんじゅん）**: 能力ランク補正が2倍
- **contrary（あまのじゃく）**: 能力ランク変化が逆転
- **unaware（てんねん）**: 相手の能力ランク補正を無視

#### 19. 能力低下時トリガー
- **defiant（まけんき）**: 能力が下がった時、攻撃+2
- **competitive（かちき）**: 能力が下がった時、特攻+2

#### 20. 被弾時能力上昇
- **justified（せいぎのこころ）**: 悪技を受けた時、攻撃+1
- **water-compaction（みずがため）**: 水技を受けた時、防御+2
- **stamina（じきゅうりょく）**: 攻撃を受けた時、防御+1
- **rattled（びびり）**: 虫・ゴースト・悪技を受けた時、素早さ+1
- **weak-armor（くだけるよろい）**: 物理技を受けた時、防御-1、素早さ+2

#### 21. いかく無効・逆効果
- **guard-dog（ばんけん）**: いかくを受けず攻撃+1、強制交代無効
- **oblivious（どんかん）**: いかく無効
- **own-tempo（マイペース）**: いかく無効
- **inner-focus（せいしんりょく）**: いかく無効
- **scrappy（きもったま）**: いかく無効

### 技威力・命中・効果関連

#### 22. 条件付き技威力上昇
- **technician（テクニシャン）**: 威力60以下の技1.5倍
- **analytic（アナライズ）**: 後攻時に技威力1.3倍
- **stakeout（はりこみ）**: 交代で出てきた相手に技威力2倍
- **neuroforce（ブレインフォース）**: 効果抜群時の技威力1.25倍
- **tinted-lens（いろめがね）**: 効果いまひとつの技威力2倍

#### 23. 特定カテゴリの技威力上昇
- **tough-claws（かたいツメ）**: 接触技の威力1.3倍
- **iron-fist（てつのこぶし）**: パンチ技の威力1.2倍
- **strong-jaw（がんじょうあご）**: 噛む技の威力1.5倍
- **mega-launcher（メガランチャー）**: 波動技の威力1.5倍
- **punk-rock（パンクロック）**: 音技の威力1.3倍 + 音技で受けるダメージ半減
- **sharpness（きれあじ）**: 切る技の威力1.5倍

#### 24. タイプ一致補正変更
- **adaptability（てきおうりょく）**: タイプ一致補正1.5倍→2倍

#### 25. 反動・デメリット技強化
- **reckless（すてみ）**: 反動技の威力1.2倍
- **rock-head（いしあたま）**: 反動ダメージ無効

#### 26. 命中率変更
- **compound-eyes（ふくがん）**: 命中率1.3倍
- **hustle（はりきり）**: 物理技の威力1.5倍、命中率0.8倍
- **no-guard（ノーガード）**: お互いの技が必中
- **victory-star（しょうりのほし）**: 自分と味方の命中率1.1倍

#### 27. 急所関連
- **battle-armor（カブトアーマー）**: 急所に当たらない
- **shell-armor（シェルアーマー）**: 急所に当たらない
- **super-luck（きょううん）**: 急所率+1
- **sniper（スナイパー）**: 急所ダメージ1.5倍→2.25倍

#### 28. 追加効果関連
- **serene-grace（てんのめぐみ）**: 追加効果発動率2倍
- **sheer-force（ちからずく）**: 追加効果削除、威力1.3倍
- **shield-dust（りんぷん）**: 追加効果を受けない

#### 29. 複数回攻撃
- **skill-link（スキルリンク）**: 2-5回攻撃が必ず5回
- **parental-bond（おやこあい）**: 技が2回攻撃になる（2回目は威力1/4）

#### 30. 優先度変更
- **gale-wings（はやてのつばさ）**: HP満タン時、飛行技の優先度+1
- **prankster（いたずらごころ）**: 変化技の優先度+1（悪タイプには無効）
- **triage（ヒーリングシフト）**: 回復技の優先度+3
- **stall（あとだし）**: 優先度-5（必ず後攻）

#### 31. 特定技の無効化・防御
- **bulletproof（ぼうだん）**: 弾・爆弾系の技を無効化
- **queenly-majesty（じょおうのいげん）**: 相手の先制技を受けない
- **dazzling（ビビッドボディ）**: 相手の先制技を受けない
- **armor-tail（テールアーマー）**: 相手の先制技を受けない

#### 32. 技の効果を変更する特性
- **corrosion（ふしょく）**: 鋼・毒タイプにもどく・もうどく状態にできる
- **long-reach（えんかく）**: 全ての技が非接触技になる
- **propeller-tail（スクリューおびれ）**: 技が必ず対象に当たる（引き寄せ・技誘導無視）
- **stalwart（すじがねいり）**: 技が必ず対象に当たる（引き寄せ・技誘導無視）

#### 33. 変化技の反射・無効化
- **magic-bounce（マジックミラー）**: 変化技を跳ね返す
- **magic-coat効果**: 一部特性で変化技を跳ね返す

### 天候・フィールド関連

#### 34. 天候召喚
- **drizzle（あめふらし）**: 場に出た時、雨
- **drought（ひでり）**: 場に出た時、晴れ
- **sand-stream（すなおこし）**: 場に出た時、砂嵐
- **snow-warning（ゆきふらし）**: 場に出た時、雪

#### 35. 天候無効化
- **cloud-nine（ノーてんき）**: 天候の効果を無効化
- **air-lock（エアロック）**: 天候の効果を無効化

#### 36. 天候で能力上昇
- **swift-swim（すいすい）**: 雨で素早さ2倍
- **chlorophyll（ようりょくそ）**: 晴れで素早さ2倍
- **sand-rush（すなかき）**: 砂嵐で素早さ2倍
- **slush-rush（ゆきかき）**: 雪で素早さ2倍

#### 37. 天候で技威力上昇
- **solar-power（サンパワー）**: 晴れで特攻1.5倍（毎ターンHP1/8減少）
- **sand-force（すなのちから）**: 砂嵐で岩・地面・鋼技1.3倍

#### 38. 天候で回復
- **rain-dish（あめうけざら）**: 雨で毎ターンHP1/16回復
- **ice-body（アイスボディ）**: 雪で毎ターンHP1/16回復
- **dry-skin（かんそうはだ）**: 雨でHP1/8回復、晴れでHP1/8減少

#### 39. 天候で回避率上昇
- **sand-veil（すながくれ）**: 砂嵐で回避率1.25倍
- **snow-cloak（ゆきがくれ）**: 雪で回避率1.25倍

#### 40. 天候＋能力上昇
- **orichalcum-pulse（ひひいろのこどう）**: 場に出た時晴れ展開 + 晴れの時攻撃1.3倍

#### 41. フィールド展開
- **psychic-surge（サイコメイカー）**: 場に出た時、サイコフィールド展開
- **electric-surge（エレキメイカー）**: 場に出た時、エレキフィールド展開
- **grassy-surge（グラスメイカー）**: 場に出た時、グラスフィールド展開
- **misty-surge（ミストメイカー）**: 場に出た時、ミストフィールド展開

#### 42. フィールド＋能力上昇
- **hadron-engine（ハドロンエンジン）**: 場に出た時エレキフィールド展開 + エレキフィールドで特攻1.3倍

#### 43. フィールド依存の能力上昇
- **grass-pelt（くさのけがわ）**: グラスフィールドで防御1.5倍
- **surge-surfer（サーフテール）**: エレキフィールドで素早さ2倍
- **quark-drive（クォークチャージ）**: エレキフィールドまたはブーストエナジー使用時、最も高い能力が1.3倍

### HP・回復・耐久関連

#### 44. 交代時回復
- **regenerator（さいせいりょく）**: 交代時HP1/3回復

#### 45. 毎ターン回復
- **poison-heal（ポイズンヒール）**: どく状態で毎ターンHP1/8回復（ダメージなし）

#### 46. 一撃耐え
- **sturdy（がんじょう）**: HP満タン時一撃耐え + 一撃必殺無効

#### 47. 最初の攻撃無効
- **disguise（ばけのかわ）**: 最初のダメージを無効化してフォルムチェンジ
- **ice-face（アイスフェイス）**: 最初の物理技を無効化してフォルムチェンジ

#### 48. 接触ダメージ
- **rough-skin（さめはだ）**: 接触技でHP1/8のダメージを与える
- **iron-barbs（てつのトゲ）**: 接触技でHP1/8のダメージを与える

#### 49. 技以外のダメージ無効
- **magic-guard（マジックガード）**: 天候、反動、設置技等のダメージ無効

#### 50. 重量変更
- **heavy-metal（ヘヴィメタル）**: 重さ2倍
- **light-metal（ライトメタル）**: 重さ半減

### タイプ変更・変身関連

#### 51. タイプ変更
- **protean（へんげんじざい）**: 使う技のタイプになる（毎回）
- **libero（リベロ）**: 使う技のタイプになる（1回のみ）
- **color-change（へんしょく）**: 受けた技のタイプになる
- **multitype（マルチタイプ）**: 持っているプレートに応じてタイプ変更
- **rks-system（ARシステム）**: 持っているメモリに応じてタイプ変更

#### 52. 変身
- **imposter（かわりもの）**: 場に出た時、相手に変身

#### 53. 見た目変更
- **illusion（イリュージョン）**: 手持ちの最後のポケモンに見える（ダメージで解除）

#### 54. フォルムチェンジ
- **zen-mode（ダルマモード）**: HP1/2以下でフォルムチェンジ
- **shields-down（リミットシールド）**: HP1/2以下でフォルムチェンジ
- **battle-bond（きずなへんげ）**: 相手を倒すとフォルムチェンジ
- **zero-to-hero（マイティチェンジ）**: 交代時にフォルムチェンジ
- **stance-change（バトルスイッチ）**: 攻撃技/キングシールド使用でフォルムチェンジ
- **hunger-switch（はらぺこスイッチ）**: ターン終了時にフォルムチェンジ
- **power-construct（スワームチェンジ）**: HP50%以下でフォルムチェンジ（ジガルド）
- **schooling（ぎょぐん）**: HP25%以上/以下でフォルムチェンジ（ヨワシ）

### 特性・技の無効化関連

#### 55. 特性無視
- **mold-breaker（かたやぶり）**: 相手の特性を無視
- **turboblaze（ターボブレイズ）**: 相手の特性を無視
- **teravolt（テラボルテージ）**: 相手の特性を無視

#### 56. 全特性無効化
- **neutralizing-gas（かがくへんかガス）**: 場にいる間全員の特性無効化

#### 57. 特性変更・コピー
- **trace（トレース）**: 場に出た時、相手の特性をコピー
- **receiver（レシーバー）**: 味方が倒れた時、その特性をコピー
- **power-of-alchemy（かがくのちから）**: 味方が倒れた時、その特性をコピー
- **mummy（ミイラ）**: 接触技を受けた時、相手の特性をミイラに変える
- **wandering-spirit（さまようたましい）**: 接触技を受けた時、相手と特性を入れ替え
- **lingering-aroma（とれないにおい）**: 接触技を受けた時、相手の特性をとれないにおいに変える

#### 58. 技無効化
- **damp（しめりけ）**: 自爆技を無効化
- **cursed-body（のろわれボディ）**: 攻撃を受けた時30%で相手の技をかなしばり

### 道具関連

#### 59. 道具保護
- **sticky-hold（ねんちゃく）**: 道具を奪われない

#### 60. 道具奪取
- **pickpocket（わるいてぐせ）**: 接触技で相手の道具を奪う
- **magician（マジシャン）**: 攻撃時に相手の道具を奪う

#### 61. 道具消失時効果
- **unburden（かるわざ）**: 道具を失うと素早さ2倍

#### 62. 道具使用制限
- **klutz（ぶきよう）**: 自分の持ち物が発動しない

#### 63. きのみ関連
- **harvest（しゅうかく）**: きのみを50%で再生（晴れで100%）
- **ripen（じゅくせい）**: きのみの効果2倍
- **cheek-pouch（ほおぶくろ）**: きのみ使用時、HP1/3回復

### 交代・行動制限関連

#### 64. 相手の交代封じ
- **shadow-tag（かげふみ）**: 相手を交代できなくする
- **arena-trap（ありじごく）**: 地面に接している相手を交代できなくする
- **magnet-pull（じりょく）**: 鋼タイプの相手を交代できなくする

#### 65. 自分の交代防止無効
- **suction-cups（きゅうばん）**: 強制交代技を受けない
- **guard-dog（ばんけん）**: いかくを受けず攻撃+1、強制交代無効

#### 66. 強制交代
- **wimp-out（にげごし）**: HP1/2以下で強制交代
- **emergency-exit（ききかいひ）**: HP1/2以下で強制交代

#### 67. 行動制限
- **truant（なまけ）**: 1ターンおきにしか行動できない
- **gorilla-tactics（ごりむちゅう）**: 攻撃1.5倍、同じ技しか使えない

### デメリット特性

#### 68. 能力半減
- **slow-start（スロースタート）**: 最初5ターン攻撃・素早さ半減
- **defeatist（よわき）**: HP1/2以下で攻撃・特攻半減

#### 69. 混乱・反動
- **tangled-feet（ちどりあし）**: 混乱時回避率2倍

### その他特殊効果

#### 70. ダブルバトル専用
- **telepathy（テレパシー）**: 味方からのダメージを受けない
- **friend-guard（フレンドガード）**: 味方が受けるダメージ0.75倍
- **plus（プラス）**: マイナスがいると特攻1.5倍
- **minus（マイナス）**: プラスがいると特攻1.5倍
- **battery（バッテリー）**: 味方の特殊技威力1.3倍

#### 71. PP削減
- **pressure（プレッシャー）**: 相手の技のPP消費が2倍

#### 72. 性別・姿関連
- **cute-charm（メロメロボディ）**: 接触技で30%メロメロ
- **rivalry（とうそうしん）**: 同性に威力1.25倍、異性に0.75倍

#### 73. 情報取得
- **frisk（おみとおし）**: 場に出た時、相手の道具を確認
- **anticipation（きけんよち）**: 相手の危険な技を感知
- **forewarn（よちむ）**: 相手の最高威力技を確認

#### 74. ノーマル技のタイプ変換
- **pixilate（フェアリースキン）**: ノーマル技がフェアリータイプになり威力1.2倍
- **refrigerate（フリーズスキン）**: ノーマル技が氷タイプになり威力1.2倍
- **aerilate（スカイスキン）**: ノーマル技が飛行タイプになり威力1.2倍
- **galvanize（エレキスキン）**: ノーマル技が電気タイプになり威力1.2倍
- **normalize（ノーマルスキン）**: 全ての技がノーマルタイプになる

#### 75. その他の特殊タイプ効果
- **scrappy（きもったま）**: ゴーストタイプにノーマル・格闘技が当たる
- **guts（こんじょう）**: 状態異常時、攻撃1.5倍
- **marvel-scale（ふしぎなうろこ）**: 状態異常時、防御1.5倍
- **toxic-boost（どくぼうそう）**: どく状態時、物理技威力1.5倍
- **flare-boost（ねつぼうそう）**: やけど状態時、特殊技威力1.5倍

#### 76. 古代・未来のパラドックスポケモン特性
- **protosynthesis（こだいかっせい）**: 晴れまたはブーストエナジー使用時、最も高い能力が1.3倍
- **quark-drive（クォークチャージ）**: エレキフィールドまたはブーストエナジー使用時、最も高い能力が1.3倍

#### 77. その他複雑な特性
- **comatose（ぜったいねむり）**: 常時ねむり状態扱い（実際には行動可能）
- **disguise（ばけのかわ）**: 最初のダメージを無効化
- **schooling（ぎょぐん）**: レベル・HP依存のフォルムチェンジ
- **gulp-missile（うのミサイル）**: なみのり・ダイビング使用後、被弾時に反撃

## 課題

269個全ての特性パターンをカバーできるメタデータ構造を設計し、Swiftで実装してください。

### 検討すべき点

1. **条件の表現方法**
   - HP閾値（1/3以下、1/2以下、1/4以下、満タン、50%以下等）
   - 技の威力閾値（60以下等）
   - 被弾後フラグ（特定タイプを受けた後）
   - 天候・フィールド
   - 道具の有無
   - ステータス状態
   - ターン数（slow-startの5ターン等）
   - レベル条件（schoolingのレベル20以上等）

2. **トリガータイミングの表現**
   - 常時
   - 場に出た時
   - 攻撃時
   - 被弾時
   - 接触時（攻撃側・防御側）
   - ターン終了時
   - 交代時
   - 能力変化時
   - 相手を倒した時
   - 味方が倒れた時
   - HP閾値を下回った時
   - 技使用後

3. **効果の対象**
   - 自分
   - 相手（単体）
   - 相手（全体）
   - 味方（単体）
   - 味方（全体）
   - 場全体
   - 技の対象

4. **複合効果の扱い**
   - water-bubbleのように3つの効果を持つ特性
   - lightning-rodのように無効化+引き寄せ+能力上昇
   - punk-rockのように攻撃強化+防御強化

5. **特性の無効化条件**
   - neutralizing-gasによる無効化
   - mold-breakerによる無視
   - いえきによる無効化
   - ミイラによる上書き

6. **Swiftでの型安全性**
   - Optional地獄を避ける
   - デコードしやすい構造
   - 効果の有無を判定しやすい
   - ネストが深くなりすぎない

7. **数値データの管理**
   - 倍率（1.2倍、1.3倍、1.5倍、2倍等）
   - 確率（30%、33%、50%等）
   - 回復量（1/3、1/4、1/8、1/16等）
   - ランク変化（+1、+2、-1等）
   - ターン数（5ターン、レベル依存等）

8. **ダブルバトル・シングルバトルの区別**
   - 一部特性はダブル専用の効果を持つ
   - 引き寄せ効果の扱い

## 期待するアウトプット

1. **メタデータ構造の全体設計**
   - JSON構造の説明
   - 主要なプロパティ一覧
   - 設計方針の説明
   - 複合効果の表現方法

2. **Swiftの型定義**
   - Codableに準拠した構造体定義
   - 必要なEnum定義（トリガー、対象、条件タイプ等）
   - Optional/非Optionalの判断基準
   - 型安全性を保つための工夫

3. **実例（JSON形式）**
   - 上記の特性から30個以上、実際のJSON形式で記述
   - 様々なパターンをカバーすること
   - 特に複雑な特性（water-bubble、punk-rock、hadron-engine等）を含めること
   - シンプルな特性から複雑な特性まで段階的に

4. **実装コード**
   - Swift構造体の完全な定義
   - デコード処理
   - 使用例のサンプルコード
   - 効果判定のヘルパーメソッド例

5. **カテゴリー一覧**
   - categories配列に使用する文字列カテゴリーの完全リスト
   - 269個全特性をカバーできること
   - 検索・フィルタリングに使用する想定
   - 重複がないこと

## 制約・注意事項
- 269個全ての特性がこの構造で表現できることを保証してください
- 拡張性を考慮（将来的に新しい特性が追加される可能性）
- Swiftで実装するため、型安全性とデコードのしやすさを重視
- categoriesは検索用の文字列配列として別途管理（今回の主眼は効果の構造化）
- 特性の無効化・上書き条件も考慮した設計
- ダブルバトルとシングルバトルの違いも表現可能にする
- 効果の発動条件と効果内容を明確に分離する


